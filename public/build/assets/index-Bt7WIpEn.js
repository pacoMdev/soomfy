import{r as _,y as M,P as S,E as B,M as D,O as N,f as i,h as e,L as U,l as h,N as E,t as f,d as n,F,m as V,v as R,e as o}from"./app-DhgeM_ro.js";import{d as k,u as j,a as q,r as O,m as T}from"./rules-DQeMV_B6.js";function $(){const v=_({name:"",email:""});M();const d=_({}),r=_(!1),u=S("$swal");return{profile:v,getProfile:async()=>{v.value=auth.user.value},updateProfile:async m=>{r.value||(r.value=!0,d.value={},axios.put("/api/user",m).then(({data:a})=>{a.success&&(auth.user.value=a.data,u({icon:"success",title:"Profile updated successfully"}))}).catch(a=>{var c;(c=a.response)!=null&&c.data&&(d.value=a.response.data.errors)}).finally(()=>r.value=!1))},validationErrors:d,isLoading:r}}const z={class:"card border-0"},A={class:"card-body"},C={class:"mb-3"},G={class:"text-danger mt-1"},H={class:"text-danger mt-1"},I={class:"mb-3"},J={class:"text-danger mt-1"},K={class:"text-danger mt-1"},Q={class:"mb-3"},W=["disabled"],X={class:""},Y={key:0},Z={key:1},ae={__name:"index",setup(v){k("required",O),k("min",T);const d={name:"required|min:3",email:"required"},{validate:r,errors:u}=j({validationSchema:d}),{value:b}=q("name",null,{initialValue:""}),{value:g}=q("email",null,{initialValue:""}),{profile:m,getProfile:a,updateProfile:c,validationErrors:y,isLoading:p}=$(),t=B({name:b,email:g});function L(){r().then(P=>{P.valid&&c(t)})}return D(()=>{a()}),N(()=>{t.name=m.value.name,t.email=m.value.email}),(P,s)=>{var x,w;return o(),i("div",z,[s[4]||(s[4]=e("div",{class:"card-header bg-transparent"},[e("h5",{class:"float-start"},"Profile")],-1)),e("div",A,[e("form",{onSubmit:U(L,["prevent"])},[e("div",C,[s[2]||(s[2]=e("label",{for:"name",class:"form-label"},"Name",-1)),h(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=l=>t.name=l),class:"form-control",id:"name"},null,512),[[E,t.name]]),e("div",G,f(n(u).name),1),e("div",H,[(o(!0),i(F,null,V((x=n(y))==null?void 0:x.name,l=>(o(),i("div",null,f(l),1))),256))])]),e("div",I,[s[3]||(s[3]=e("label",{for:"email",class:"form-label"},"Email",-1)),h(e("input",{type:"email","onUpdate:modelValue":s[1]||(s[1]=l=>t.email=l),class:"form-control",id:"email"},null,512),[[E,t.email]]),e("div",J,f(n(u).email),1),e("div",K,[(o(!0),i(F,null,V((w=n(y))==null?void 0:w.email,l=>(o(),i("div",null,f(l),1))),256))])]),e("div",Q,[e("button",{disabled:n(p),class:"btn btn-primary"},[h(e("div",X,null,512),[[R,n(p)]]),n(p)?(o(),i("span",Y,"Processing...")):(o(),i("span",Z,"Update"))],8,W)])],32)])])}}};export{ae as default};
