import{E as S,a3 as y,r as f,M as B,O as C,f as n,h as e,L as T,l as g,N as U,t as h,d as r,F as j,m as A,q as I,k as K,v as O,a as z,b as G,e as l,I as H}from"./app-DhgeM_ro.js";import{u as J}from"./roles-CZUiWw_L.js";import{d as k,u as Q,a as W,r as X,m as Y}from"./rules-DQeMV_B6.js";const Z={class:"row justify-content-center my-5"},$={class:"col"},ee={class:"card border-0 shadow-sm"},se={class:"card-body"},te={class:"mb-3"},ae={class:"form-outline w-25"},oe={class:"text-danger mt-1"},ie={class:"text-danger mt-1"},ne={class:"mt-4"},re=["disabled"],le={class:""},de={key:0},me={key:1},he={__name:"Edit",async setup(ce){let t,d;k("required",X),k("min",Y);const V={name:"required|min:3"},{validate:P,errors:F,resetForm:ue}=Q({validationSchema:V}),{value:L}=W("name",null,{initialValue:""}),{role:b,updateRolePermissions:R,getRole:E,updateRole:pe,validationErrors:q,isLoading:u}=J(),o=S({name:L}),x=z();let p=([t,d]=y(()=>axios.get("/api/permissions/")),t=await t,d(),t),D=p.data.data;p=([t,d]=y(()=>axios.get("/api/role-permissions/"+x.params.id)),t=await t,d(),t);let _=p.data.data,w=N(D,_);f(w),f(_);const v=f([w,_]);function M(){P().then(m=>{if(m.valid){let s=v.value[1].map(i=>i.id);R(o,s)}})}B(()=>{E(x.params.id)}),C(()=>{o.id=b.value.id,o.name=b.value.name});function N(m,s){return m.filter(i=>!s.some(c=>i.id===c.id))}return(m,s)=>{var c;const i=G("PickList");return l(),n("div",Z,[e("div",$,[e("div",ee,[e("div",se,[e("form",{onSubmit:T(M,["prevent"])},[e("div",te,[s[2]||(s[2]=e("label",{for:"post-title",class:"form-label"}," Title ",-1)),e("div",ae,[g(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>o.name=a),id:"post-title",type:"text",class:"form-control"},null,512),[[U,o.name]])]),e("div",oe,h(r(F).name),1),e("div",ie,[(l(!0),n(j,null,A((c=r(q))==null?void 0:c.name,a=>(l(),n("div",null,h(a),1))),256))])]),I(i,{modelValue:v.value,"onUpdate:modelValue":s[1]||(s[1]=a=>v.value=a),dataKey:"id",breakpoint:"1400px",striped:"",pt:{root:{class:"picklist"}}},{option:K(({option:a})=>[H(h(a.name),1)]),_:1},8,["modelValue"]),e("div",ne,[e("button",{disabled:r(u),class:"btn btn-primary"},[g(e("div",le,null,512),[[O,r(u)]]),r(u)?(l(),n("span",de,"Processing...")):(l(),n("span",me,"Update"))],8,re)])],32)])])])])}}};export{he as default};
